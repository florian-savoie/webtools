{% set title = 'client acceuil' %}
{% extends "./layout/layout_nav.html.twig" %}
{% block css %}

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

    <!-- Flipster CSS -->
    <link rel="stylesheet" href="dist/jquery.flipster.min.css">
    <link rel="stylesheet" href="../assets/vendor/css/pages/app-chat.css" />

    <link rel="stylesheet" href="../assets/css/chat.css">

    <link rel="stylesheet" href="../../assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css" />
    <link rel="stylesheet" href="../../assets/vendor/libs/node-waves/node-waves.css" />
    <link rel="stylesheet" href="../../assets/vendor/libs/typeahead-js/typeahead.css" />
    <link rel="stylesheet" href="../../assets/vendor/libs/datatables-responsive-bs5/responsive.bootstrap5.css" />
    <link rel="stylesheet" href="../../assets/vendor/libs/datatables-buttons-bs5/buttons.bootstrap5.css" />
    <!-- Flipster Js -->
    <script src="dist/jquery.flipster.min.js"></script>

{% endblock %}
{% block contenu %}
    <!-- Content -->
    <!-- Users List Table -->
    <div class="container mt-5">
        <div class="row mt-5"></div>

        <!-- Users List Table -->
        <div class="card">
            <div class="card-header">
                <h5 class="card-title">Search Filter</h5>
                <div class="d-flex justify-content-between align-items-center row py-3 gap-3 gap-md-0">
                    <div class="col-md-4 user_role"></div>
                    <div class="col-md-4 user_plan"></div>
                    <div class="col-md-4 user_status"></div>
                </div>
            </div>
            <div class="card-datatable table-responsive">
                <table class="datatables-users table">
                    <thead class="table-light">
                    <tr>
                        <th>id</th>
                        <th>Utilisateur</th>
                        <th>Role</th>
                        <th>Nombres de publication</th>
                        <th>supprimer</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for user in users %}
                        <tr>
                            <td>{{ user.id }}</td> <!-- Colonne vide -->
                            <td>{{ user.pseudo }}</td> <!-- Nom de l'utilisateur -->
                            <td>
                                <div class="row">
                                    <div class="col-6"><select class="form-select" id="selectrole{{ user.id }}">
                                            <option disabled selected>{{ user.role }}</option>
                                            <option>user</option>
                                            <option>moderateur</option>
                                            <option>admin</option>
                                            <option>bloquer</option>
                                        </select></div>
                                    <div class="col-6">
                                        <button class="btn btn-sm btn-success" onclick="updaterole({{ user.id }})">
                                            Changer
                                        </button>
                                    </div>
                                </div>
                            </td> <!-- RÃ´le de l'utilisateur -->
                            <td>{{ user.num_publications }}</td> <!-- Nombre de publications de l'utilisateur -->
                            <td>
                                <!-- Bouton pour supprimer l'utilisateur -->
                                <button class="btn btn-sm btn-danger" onclick="deleteUser({{ user.id }})">Supprimer
                                </button>
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
            <!-- Offcanvas to add new user -->

        </div>


    </div>





{% endblock %}

        {% block js %}


            <script src="../../assets/vendor/assets/js/form-basic-inputs.js"></script>


            <script src="../../assets/js/users/role.js"></script>
            <script src="../../assets/js/users/deleteUser.js"></script>


        {% endblock %}